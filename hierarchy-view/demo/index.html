<!DOCTYPE html>
<html ng-app="hierarchyDemo">
    <head>
        <title>Hierarchy-View Demo : Portlet.io</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="../style.hierarchy-view.css">
        <style type="text/css">
            body {
                margin-top: 70px;
            }
        </style>
    </head>
    <body ng-controller="hierarchyController as ctrl">
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <a href class="navbar-brand">Hierarchy-View Directive Example</a>
                </div>
            </div>
        </div>
        
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-sm-6">
                    <h3 class="lead">Hierarchy View in Action</h3>
                    <hierarchy-view node-data="ctrl.data" current-node="ctrl.current"></hierarchy-view>
                </div>
                <div class="col-md-6 col-sm-6">
                    <div class="row">
                        <div class="col-md-12">
                            <h3 class="lead">Selected NodeID</h3>
                            {{ ctrl.current | json:4 }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <h3 class="lead">Hierarchy Data</h3>
                            {{ ctrl.data | json:4 }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Core Scripts -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
        <!-- Core Components -->
        <script src="../hierarchyView.js"></script>
        <!-- The Angular Magic -->
        <script type="text/javascript">
            (function() {
                var demoApp = angular.module('hierarchyDemo', ['portlet.io.hierarchy']);
                demoApp.controller('hierarchyController', hierarchyController);
                function hierarchyController() {
                    var vm = this;
                    vm.data = {
                        nodeID : 1000,
                        name : 'Tier 1',
                        icon : 'fa fa-server',
                        callback : function(node) {
                            onNodeClick(node);
                        },
                        children : [
                            {
                                nodeID : 1100,
                                name : 'Tier 2-0',
                                icon : 'fa fa-database',
                                callback : function(node) {
                                    onNodeClick(node);
                                }
                            },{
                                nodeID : 1101,
                                name : 'Tier 2-1',
                                icon : 'fa fa-database',
                                callback : function(node) {
                                    onNodeClick(node);
                                }
                            },{
                                nodeID : 1102,
                                name : 'Tier 2-2',
                                icon : 'fa fa-database',
                                callback : function(node) {
                                    onNodeClick(node);
                                },
                                children : [
                                    {
                                        nodeID : 1110,
                                        name : 'Tier 3-0',
                                        icon : 'fa fa-hdd-o',
                                        callback : function(node) {
                                            onNodeClick(node);
                                        }
                                    },{
                                        nodeID : 1111,
                                        name : 'Tier 3-1',
                                        icon : 'fa fa-hdd-o',
                                        callback : function(node) {
                                            onNodeClick(node);
                                        }
                                    },{
                                        nodeID : 1112,
                                        name : 'Tier 3-2',
                                        icon : 'fa fa-hdd-o',
                                        callback : function(node) {
                                            onNodeClick(node);
                                        },
                                        children : [
                                            {
                                                nodeID : 11110,
                                                name : 'Tier 4-0',
                                                icon : 'fa fa-floppy-o',
                                                callback : function(node) {
                                                    onNodeClick(node);
                                                }
                                            }
                                        ]
                                    }
                                ]
                            },{
                                nodeID : 1103,
                                name : 'Tier 2-3',
                                icon : 'fa fa-database',
                                callback : function(node) {
                                    onNodeClick(node);
                                },
                                children : [
                                    // no children
                                ]
                            }
                        ]
                    };
                    
                    vm.current = vm.data;
                    
                    function onNodeClick(node) {
                        vm.current = node;
                    }
                }
            })();
        </script>
    </body>
</html>